---
pagetitle: "Identifying Climate Information Readiness"
nb-authors:
  - Johnson Mwakazi
  - Brayden Youngberg
  - Pete Stewart
  - Shalika Vyas
  - Harold Achicanoy
date-created: "2025-11-17"
date-edited: today
---

```{ojs}
cis = await FileAttachment(
  "/data/cis/translations.json",
).json();
```

```{ojs}
//| echo: false

// Hero section - nbTitle and hero_url are defined in source code section
hero_url = "./../../images/default_crop.webp";
atlasHero(nbTitle, hero_url);
```

```{ojs}
//| echo: false

// Floating sidebar with admin level selectors and minimize functionality
{
  const container = htl.html`
<style>
.floating-sidebar {
  position: fixed;
  top: 120px;
  right: 20px;
  width: 380px;
  background: white;
  border: 1px solid #ddd;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  z-index: 1000;
  max-height: calc(100vh - 140px);
  overflow-y: auto;
  overflow-x: hidden;
  transition: all 0.3s ease;
}

.floating-sidebar.minimized {
  width: 60px;
  height: 60px;
  overflow: hidden;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sidebar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding-bottom: 8px;
  border-bottom: 2px solid #0066cc;
  padding: 15px 15px 8px 15px;
}

.floating-sidebar.minimized .sidebar-header {
  margin-bottom: 0;
  padding: 0;
  border-bottom: none;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  display: flex;
}

.sidebar-header h4 {
  margin: 0;
  font-size: 16px;
}

.floating-sidebar.minimized .sidebar-header h4 {
  display: none;
}

.minimize-btn {
  background: #0066cc;
  border: 1px solid #0052a3;
  cursor: pointer;
  font-size: 16px;
  padding: 6px 12px;
  color: #003366;
  border-radius: 4px;
  transition: all 0.2s;
  font-weight: bold;
  min-width: 32px;
  text-align: center;
}

.minimize-btn:hover {
  background: #004499;
  border-color: #003366;
  color: #ffffff;
}

.floating-sidebar.minimized .minimize-btn {
  padding: 8px;
  min-width: 40px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sidebar-content {
  padding: 0 15px 15px 15px;
  transition: opacity 0.3s ease;
  overflow-x: hidden;
}

.floating-sidebar.minimized .sidebar-content {
  display: none;
  opacity: 0;
}

.sidebar-section {
  margin-bottom: 15px;
  width: 100%;
  box-sizing: border-box;
  overflow-x: hidden;
}

.sidebar-section > * {
  max-width: 100%;
  box-sizing: border-box;
  overflow-x: hidden;
}

/* Ensure multi-select components fit within sidebar */
.sidebar-section .observablehq,
.sidebar-section form,
.sidebar-section div[class*="select"],
.sidebar-section button {
  max-width: 100%;
  box-sizing: border-box;
}

@media (max-width: 1400px) {
  .floating-sidebar {
    position: relative;
    top: 0;
    right: 0;
    width: 100%;
    margin-bottom: 20px;
  }
  .floating-sidebar.minimized {
    width: 100%;
  }
}
</style>

<div class="floating-sidebar">
  <div style="padding: 0px 15px 0 15px;">
    <div class="sidebar-header">
      <h4>Region Selection</h4>
      <button class="minimize-btn">▼</button>
    </div>
  </div>
  <div class="sidebar-content">
    <div class="sidebar-section">
      ${viewof selectedAdmin0}
    </div>
    <div class="sidebar-section">
      ${viewof selectedAdmin1}
    </div>
    <div class="sidebar-section">
      ${viewof selectedAdmin2}
    </div>
  </div>
</div>
`;

  const sidebar = container.querySelector('.floating-sidebar');
  const btn = container.querySelector('.minimize-btn');
  
  btn.onclick = () => {
    sidebar.classList.toggle('minimized');
    btn.textContent = sidebar.classList.contains('minimized') ? '▲' : '▼';
  };
  
  return container;
}
```

```{ojs}
overviewTitle = _lang(cis.overviewTitle);
overviewContent = _lang(cis.overviewContent);

```

# `{ojs} overviewTitle` {#overviewTitle}

`{ojs} overviewContent` 


{{< include _cis_readiness_index.qmd >}}

{{< include _cis_hazard_intersection.qmd >}}

{{< include _cis_implementation.qmd >}}

# `{ojs} appendix` {#appendix}

```{ojs}
toc_bottom = atlasTOC({
  skip: ["notebook-title", "appendix", "source-code"], // These should be the section headings in the {# headings}
  heading: `<b>${Lang.toSentenceCase(_lang(general_translations.toc))}</b>`,
});

htl.html`
      <div class='floating-toc'>
      ${toc_bottom}
      </div>
      `;
```

# Source code {#source-code .hidden}

<!--
NOTE:Everything below this point will not appear in the notebook.
This is useful to hide all of the code, master selectors (language, admin level, etc.),
and other things that are needed for the notebook to run but would be messy if
actually appearing in the notebook.
-->

<!-- Import UI Components FIRST -->

```{ojs}
// Import all UI components at once to avoid duplication
import { atlasTOC, atlasHero, downloadButton } from "/helpers/uiComponents.ojs";
import { dropdownInput as multiSelect, dropdownCSS } from "/helpers/multiSelect.ojs";
```

<!-- Text and Language Translations -->

```{ojs}
// This cell is to contain all the headings and the notebook title
nbTitle = _lang({
  en: "Identifying Climate Information Readiness",
  fr: "Identifiant la Readiness des informations climatiques",
});

// key_insights = _lang({en: "Key Insights", fr: "Résumé"})
heading1 = _lang({ en: "Heading 1", fr: "Titre 1" });
heading2 = _lang({ en: "Heading 2", fr: "Titre 2" });
heading3 = _lang({ en: "Heading 3", fr: "Titre 3" });
heading4 = _lang({ en: "Heading 4", fr: "Titre 4" });
nbSummary = _lang({ en: "Summary", fr: "Résumé" });
appendix = _lang(general_translations.appendix);
```

```{ojs}
mutable hoverCountry = "SSA" // This mutable is defined here and updated in _template_plot.qmd. It should only be defined once.

keyInsights = {
  let template = _lang({
        en: `This is where some key insights should go, they will be dynamic based on the selections such as country (**:::country:::**) and crop type (**:::cropType:::**)`,
        fr: `Ceci est là où les résumés clés devraient être, ils seront dynamiques en fonction des sélections comme pays (**:::country:::**) et type de culture (**:::cropType:::**)`
  })

  let fill_items = [
      { name: "country", value: hoverCountry },
      { name: "cropType", value: _lang({en: 'potatoes', fr: 'pomme de terre'}) }
    ]
  let keyText =  md`${Lang.reduceReplaceTemplateItems(template, fill_items)}`
  return keyText
}
```

```{ojs}
import { lang as Lang } from "/helpers/lang.js"

general_translations = await FileAttachment("/data/shared/generalTranslations.json").json()

languages = [
  { key: "en", label: "English", locale: 'en-US' },
  { key: "fr", label: "Français", locale: 'fr-FR' }
]

defaultLangKey = {
  const name = "lang";
  const list = languages.map((d) => d.key);
  const defaultKey = "en";
  const queryParam = await Lang.getParamFromList({ name, list });
  return queryParam ?? defaultKey;
}

_lang = Lang.lg(masterLanguage.key)

viewof masterLanguage = Inputs.radio(languages, {
  label: "Main language toggle",
  format: (d) => d.key,
  value: languages.find((x) => x.key === defaultLangKey),
})
```

```{ojs}
// import { NavbarLangSelector } from "/helpers/uiComponents.ojs"
function NavbarLangSelector(language_obj, masterLanguage) {
  let navEnd = document.querySelector(".navbar-nav.ms-auto .nav-item.compact");
  if (navEnd) {
    let existingLangSelector = document.getElementById("nav-lang-selector");
    if (!existingLangSelector) {
      let lang_sel = Inputs.bind(
        Inputs.radio(language_obj, {
          label: "",
          format: (d) => d.label
        }),
        viewof masterLanguage
      );
      lang_sel.id = "nav-lang-selector";

      // Hack the css together for the observable inputs
      lang_sel.style.display = "flex";
      lang_sel.style.alignItems = "center";
      lang_sel.style.marginLeft = "10px";
      let lang_div = lang_sel.querySelector("div");
      lang_div.style.display = "flex";
      lang_div.style.flexDirection = "column";

      // Insert the new item after the GitHub icon and other elements
      navEnd.parentNode.appendChild(lang_sel);
    }
  }
}

NavbarLangSelector(languages, masterLanguage)
```

```{ojs}
prettyLanguageView = {
  return Inputs.bind(
    Inputs.radio(languages, {
      label: _lang(general_translations.language),
      format: (d) => d.label
    }),
    viewof masterLanguage
  );
}
```

<!--

# Prototypes for future use to hack a sidebar into notebooks:

{.column-margin}

```{ojs}
htl.html`
<style>
.sticky-margin-div {
  position: fixed;
  }
@media (max-width: 768px) {
  .sticky-margin-div {
    position: static;
    }
}
</style>

<div class = "sticky-margin-div">
    <div>
      ${Inputs.radio(languages, {
        label: "Main language toggle",
        format: (d) => d.key,
        value: languages.find((x) => x.key === defaultLangKey),
      })}
    </div>
  </div>`
```

:-::

-->

<!-- Floating Sidebar: Self-contained HTML, CSS, and JS -->
<!--
<div id="floating-sidebar">

</div>

<style>
  #floating-sidebar {
    position: fixed;
    top: 150px;           /* Distance from top of the page */
    left: 20px;          /* Distance from left of the page */
    width: 260px;        /* Sidebar width */
    min-height: 400px;   /* Minimum height */
    max-height: 80vh;    /* Max height relative to viewport */
    background: #ffffff;
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
    border-radius: 8px;
    padding: 20px;
    overflow-y: auto;
    z-index: 9999;
    transition: box-shadow 0.2s;
  }
  #floating-sidebar:hover {
    box-shadow: 0 8px 24px rgba(0,0,0,0.18);
  }
  /* Responsive: hide on small screens */
  @media (max-width: 800px) {
    #floating-sidebar {
      display: none;
    }
  }
</style>

<script>
  // Optional: Add any JS for interactivity here
  // Example: Toggle sidebar visibility with a keyboard shortcut (Ctrl+B)
  document.addEventListener('keydown', function(e) {
    if (e.ctrlKey && e.key === 'b') {
      const sidebar = document.getElementById('floating-sidebar');
      sidebar.style.display = (sidebar.style.display === 'none') ? 'block' : 'none';
    }
  });
</script> -->
