---
pagetitle: "Vulnerability Assessment - Adaptation Atlas"
nb-authors: 
  - Johnson Mwakazi
  - Pete Stewart
  - Brayden Youngberg
date-created: '2025-02-19'
date-edited: today
css: styles.css
---

```{ojs}
// Core imports and dependencies
import {toc} from "@nebrius/indented-toc"
import { lang as Lang } from "/helpers/lang.js"
import { atlasTOC, atlasHero } from "/helpers/uiComponents.ojs"
// Tidy JS removed - replaced with vanilla JavaScript (.filter, .map) for better performance
import { patchWindowsCache } from "/helpers/data.js"
import { downloadButton } from "/helpers/uiComponents.ojs"

// Required libraries
topojson = require("topojson")
d3 = require("d3@6")

// Data imports
general_translations = await FileAttachment("/data/shared/generalTranslations.json").json()
vulnerability_translations = await FileAttachment("/data/vulnerability_notebook/translations.json").json()

// Hero image configuration
hero_url = "./../../images/default_crop.webp" 
```

{{< include _shared.qmd >}}

{{< include _hero_section.qmd >}}

```{ojs}
overview = _lang(vulnerability_translations.notebook_overview)
```

# `{ojs} overview ` {#overview}

`{ojs} _lang(vulnerability_translations.notebook_overview_text1)`

`{ojs} _lang(vulnerability_translations.notebook_overview_text2)`

---

{{< include _exposure_section.qmd >}}

---

{{< include _sensitivity_section.qmd >}}

---

{{< include _adaptive_capacity_section.qmd >}}

---

{{< include _composite_index_section.qmd >}}


---

# `{ojs} appendix` {#appendix}

```{ojs}
//| echo: false
//| code-fold: show

// Add a small delay to ensure DOM is fully loaded
toc_bottom = {
  // Wait for DOM to be ready
  await new Promise(resolve => setTimeout(resolve, 100));
  return atlasTOC({
    skip: ['notebook-title', 'appendix', 'source-code'], // heading ids to skip
    heading: `<b>In This Notebook</b>`,
    selector: "h1,h2", // Selectors to include (e.g., "h1,h2,h3")
  });
}

htl.html`
      <div class='floating-toc'>
      ${toc_bottom}
      </div>
      `
```



```{ojs}
// About this notebook
aboutSection = htl.html`
  <div style="
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 24px;
    margin: 24px 0;
  ">
    <h3 style="margin: 0 0 16px 0; color: #2d3748;">
      ${_lang({en: "About This Notebook", fr: "À propos de ce carnet"})}
    </h3>
    <p style="margin: 0 0 12px 0; line-height: 1.6;">
      ${_lang({
        en: "This vulnerability assessment notebook helps you understand climate vulnerability through three key dimensions: exposure to climate hazards, sensitivity of populations, and adaptive capacity of communities.",
        fr: "Ce carnet d'évaluation de la vulnérabilité vous aide à comprendre la vulnérabilité climatique à travers trois dimensions clés : l'exposition aux dangers climatiques, la sensibilité des populations et la capacité d'adaptation des communautés."
      })}
    </p>
    <p style="margin: 0 0 12px 0; line-height: 1.6;">
      ${_lang({
        en: "The notebook uses interactive visualizations to explore vulnerability patterns across Sub-Saharan Africa, with data that can be filtered by administrative regions and demographic characteristics.",
        fr: "Le carnet utilise des visualisations interactives pour explorer les schémas de vulnérabilité à travers l'Afrique subsaharienne, avec des données qui peuvent être filtrées par régions administratives et caractéristiques démographiques."
      })}
    </p>
    <p style="margin: 0; line-height: 1.6; font-size: 14px; color: #6b7280;">
      ${_lang({
        en: "For questions or feedback about this notebook, please contact the Adaptation Atlas team.",
        fr: "Pour des questions ou commentaires sur ce carnet, veuillez contacter l'équipe de l'Atlas d'adaptation."
      })}
    </p>
  </div>
`

```

# Source code {#source-code .hidden} 
<!-- 
NOTE: Everything below this point will not appear in the notebook.
This is useful to hide all of the code, master selectors (language, admin level, etc.),
and other things that are needed for the notebook to run but would be messy if
actually appearing in the notebook.
-->


```{ojs}
// Navbar language selector integration
function NavbarLangSelector(language_obj, masterLanguage) {
  let navEnd = document.querySelector(".navbar-nav.ms-auto .nav-item.compact");
  if (navEnd) {
    let existingLangSelector = document.getElementById("nav-lang-selector");
    if (!existingLangSelector) {
      let lang_sel = Inputs.bind(
        Inputs.radio(language_obj, {
          label: "",
          format: (d) => d.label
        }),
        viewof masterLanguage
      );
      lang_sel.id = "nav-lang-selector";
      
      // Style the language selector for navbar integration
      lang_sel.style.display = "flex";
      lang_sel.style.alignItems = "center";
      lang_sel.style.marginLeft = "10px";
      let lang_div = lang_sel.querySelector("div");
      lang_div.style.display = "flex";
      lang_div.style.flexDirection = "column";

      navEnd.parentNode.appendChild(lang_sel);
    }
  }
}

NavbarLangSelector(languages, masterLanguage)
```


```{ojs}
// Language and text configuration
appendix = _lang(general_translations.appendix)

// Cache stats for development
cacheStats = {
  if (typeof dataCache !== 'undefined') {
    return `Cache contains ${dataCache.size} items: ${Array.from(dataCache.keys()).join(', ')}`;
  }
  return "Cache not available";
}

// Master language selector
viewof masterLanguage = Inputs.radio(languages, {
  label: "Main language toggle",
  format: (d) => d.key,
  value: languages.find((x) => x.key === defaultLangKey),
})
```
