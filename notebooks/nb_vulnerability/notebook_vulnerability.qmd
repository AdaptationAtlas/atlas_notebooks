---
pagetitle: "Vulnerability Assessment - Adaptation Atlas"
nb-authors: 
  - Johnson Mwakazi
  - Pete Stewart
  - Brayden Youngberg
date-created: '2025-02-19'
date-edited: today
css: styles.css
---

```{ojs}
// Core imports and dependencies
import {toc} from "@nebrius/indented-toc"
import { lang as Lang } from "/helpers/lang.js"
import { atlasTOC, atlasHero } from "/helpers/uiComponents.ojs"
import { tidy, filter, mutate, select, arrange, desc } from "@pbeshai/tidyjs"
import { patchWindowsCache } from "/helpers/data.js"
import { downloadButton } from "/helpers/uiComponents.ojs"

// Required libraries
topojson = require("topojson")
d3 = require("d3@6")

// Data imports
general_translations = await FileAttachment("/data/shared/generalTranslations.json").json()
vulnerability_translations = await FileAttachment("/data/vulnerability_notebook/translations.json").json()

// Hero image configuration
hero_url = "./../../images/default_crop.webp" 
```

{{< include _shared.qmd >}}

{{< include _hero_section.qmd >}}

```{ojs}
overview = _lang(vulnerability_translations.notebook_overview)
```

# `{ojs} overview ` {#overview}

`{ojs} _lang(vulnerability_translations.notebook_overview_text1)`

`{ojs} _lang(vulnerability_translations.notebook_overview_text2)`

---

{{< include _exposure_section.qmd >}}

{{< include _sensitivity_section.qmd >}}

---

<!-- {{< include _sensitivity_section.qmd >}}

---

{{< include _adaptive_capacity_section.qmd >}}

---

{{< include _composite_index_section.qmd >}} -->

---

# `{ojs} appendix` {#appendix}

```{ojs}
toc_bottom = atlasTOC({
  skip: ['notebook-title', 'appendix', 'source-code'], 
  heading: `<b>${Lang.toSentenceCase(_lang(general_translations.toc))}</b>`
})

htl.html`
  <div class='floating-toc'>
    ${toc_bottom}
  </div>
`
```

```{ojs}
// About this notebook
aboutSection = htl.html`
  <div style="
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 24px;
    margin: 24px 0;
  ">
    <h3 style="margin: 0 0 16px 0; color: #2d3748;">
      ${_lang({en: "About This Notebook", fr: "À propos de ce carnet"})}
    </h3>
    <p style="margin: 0 0 12px 0; line-height: 1.6;">
      ${_lang({
        en: "This vulnerability assessment notebook helps you understand climate vulnerability through three key dimensions: exposure to climate hazards, sensitivity of populations, and adaptive capacity of communities.",
        fr: "Ce carnet d'évaluation de la vulnérabilité vous aide à comprendre la vulnérabilité climatique à travers trois dimensions clés : l'exposition aux dangers climatiques, la sensibilité des populations et la capacité d'adaptation des communautés."
      })}
    </p>
    <p style="margin: 0 0 12px 0; line-height: 1.6;">
      ${_lang({
        en: "The notebook uses interactive visualizations to explore vulnerability patterns across Sub-Saharan Africa, with data that can be filtered by administrative regions and demographic characteristics.",
        fr: "Le carnet utilise des visualisations interactives pour explorer les schémas de vulnérabilité à travers l'Afrique subsaharienne, avec des données qui peuvent être filtrées par régions administratives et caractéristiques démographiques."
      })}
    </p>
    <p style="margin: 0; line-height: 1.6; font-size: 14px; color: #6b7280;">
      ${_lang({
        en: "For questions or feedback about this notebook, please contact the Adaptation Atlas team.",
        fr: "Pour des questions ou commentaires sur ce carnet, veuillez contacter l'équipe de l'Atlas d'adaptation."
      })}
    </p>
  </div>
`

aboutSection
```

# Source code {#source-code .hidden} 
<!-- 
NOTE: Everything below this point will not appear in the notebook.
This is useful to hide all of the code, master selectors (language, admin level, etc.),
and other things that are needed for the notebook to run but would be messy if
actually appearing in the notebook.
-->

```{ojs}
// Language and text configuration
appendix = _lang(general_translations.appendix)

// Master language selector
viewof masterLanguage = Inputs.radio(languages, {
  label: "Main language toggle",
  format: (d) => d.key,
  value: languages.find((x) => x.key === defaultLangKey),
})
```

```{ojs}
// Navbar language selector integration
function NavbarLangSelector(language_obj, masterLanguage) {
  let navEnd = document.querySelector(".navbar-nav.ms-auto .nav-item.compact");
  if (navEnd) {
    let existingLangSelector = document.getElementById("nav-lang-selector");
    if (!existingLangSelector) {
      let lang_sel = Inputs.bind(
        Inputs.radio(language_obj, {
          label: "",
          format: (d) => d.label
        }),
        viewof masterLanguage
      );
      lang_sel.id = "nav-lang-selector";
      
      // Style the language selector for navbar integration
      lang_sel.style.display = "flex";
      lang_sel.style.alignItems = "center";
      lang_sel.style.marginLeft = "10px";
      let lang_div = lang_sel.querySelector("div");
      lang_div.style.display = "flex";
      lang_div.style.flexDirection = "column";

      navEnd.parentNode.appendChild(lang_sel);
    }
  }
}

NavbarLangSelector(languages, masterLanguage)
```

```{ojs}
// Pretty language selector for development/debugging
prettyLanguageView = {
  return Inputs.bind(
    Inputs.radio(languages, {
      label: _lang(general_translations.language),
      format: (d) => d.label
    }),
    viewof masterLanguage
  );
}
```

```{ojs}
// CSS for enhanced notebook styling
html`<style>
/* Global styles for vulnerability notebook */
.notebook-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

/* Section dividers */
hr {
  border: none;
  height: 2px;
  background: linear-gradient(90deg, transparent, #e5e7eb, transparent);
  margin: 40px 0;
}

/* Improve spacing between sections */
#exposure, #sensitivity, #adaptive-capacity, #composite-vulnerability {
  scroll-margin-top: 80px; /* Account for fixed header */
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .notebook-content {
    padding: 0 15px;
  }
  
  .form-inputs-container {
    flex-direction: column !important;
    align-items: stretch !important;
  }
}

/* Enhanced button styling */
.observablehq button {
  transition: all 0.2s ease;
}

.observablehq button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

/* Floating TOC improvements */
.floating-toc {
  position: sticky;
  top: 100px;
  z-index: 10;
}

/* Print styles */
@media print {
  .floating-toc,
  #source-code,
  .controls-container {
    display: none !important;
  }
}
</style>`
```

