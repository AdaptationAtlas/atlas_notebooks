---
format:
  html:
    code-fold: true
---

# Example on how to use the linked admin selects in the notebooks

1. Import the multiple admin selectors component OJS library

```{ojs}
import {
  renderA0Multi,
  renderA1Multi,
  renderA2Multi,
  admin0Select,
  admin1Select,
  admin2Select,
  buildAdminMultiForm,
} from "/components/_adminSelectorsMulti.ojs";
```

This will load in dynamic values for:

- admin0Select
- admin1Select
- admin2Select

It also loads in the following functions:

- renderA0Multi
- renderA1Multi
- renderA2Multi
- buildAdminMultiForm

3. Use the selectors in the notebook

The functions can be called directly and multiple times. They will always update
the single dynamic values.

```{ojs}
//| echo: true
renderA0Multi();
renderA1Multi();
renderA2Multi();
```

```{ojs}
//| echo: true
{
  const a0 = admin0Select.map(d => d.admin0_name).join(", ");
  const a1 = admin1Select.map(d => d.admin1_name + ` (${d.iso3})`).join(", ");
  const a2 = admin2Select.map(d => d.admin2_name + ` (${d.iso3})`).join(", ");
  return md`
- Selected Admin0: ${a0}
- Selected Admin1: ${a1}
- Sleected Admin2: ${a2}
`;
}
```

```{ojs}
//| echo: true
adminSelections = new Object({
  admin0: admin0Select,
  admin1: admin1Select,
  admin2: admin2Select,
});

adminSelections;
```

```{ojs}
//| echo: true
buildAdmin01Form = () => {
  return Inputs.form([renderA0Multi(), renderA1Multi()], {
    template: (inputs) =>
      html`<div style="display: flex; gap: 2em;">${inputs}</div>`,
  });
};

buildAdmin01Form();
```

It is now possible to call `buildAdminForm()` or `renderA*Multi()` anywhere in
the notebook as many times as needed and the values can always be accessed
through the `admin*Select` object.

`{ojs} buildAdminMultiForm()`

## Example from the notebook

- No need for viewof
- No need to access the .value property of hz_admin1, hz_admin2, etc. value
  should always be accessed as `admin*Select`

```{ojs}
//| echo: true
import { inputTemplate } from "/helpers/std.ojs";
// Geography selectors (standard Atlas boundary UI)
hz_admin0 = renderA0Multi({ langkey: "en", maxSelections: 8 });
hz_admin1 = renderA1Multi({ langkey: "en", maxSelections: 12 });
hz_admin2 = renderA2Multi({ langkey: "en", maxSelections: 20 });

// Render the 3 selectors with the shared input template
hz_geoUI = html`<div class="hz-geoRow">${inputTemplate({ gap: "10px" })([hz_admin0, hz_admin1, hz_admin2])}</div>`;

// Build a reusable form that can be used over and over in the notebook

buildAdminMultiForm = () => {
  const admin0 = renderA0Multi({ langkey: "en", maxSelections: 8 });
  const admin1 = renderA1Multi({ langkey: "en", maxSelections: 12 });
  const admin2 = renderA2Multi({ langkey: "en", maxSelections: 20 });
  return Inputs.form([admin0, admin1, admin2], {
    template: (inputs) =>
      html`<div style="display: flex; gap: 2em;">${inputs}</div>`,
  });
};

buildAdminMultiForm();

buildAdminMultiForm();
```
