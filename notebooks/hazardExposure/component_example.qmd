---
execute:
  echo: true
---

# Some examples for the different Atlas reusable components

```{ojs}
import { getAdminBoundaries } from "/components/_atlasBoundaries.ojs";

getAdminBoundaries(0);

getAdminBoundaries([0]);

getAdminBoundaries([1, 2]);
```

```{ojs}
dummyData = [
  { admin0_name: "Kenya", crop: "maize", value: 100000000 },
  { admin0_name: "Kenya", crop: "potato", value: 80000000 },
  { admin0_name: "Kenya", crop: "tea", value: 90000000 },
  { admin0_name: "Kenya", crop: "coffee", value: 110000000 },
  { admin0_name: "Tanzania", crop: "maize", value: 50000000 },
  { admin0_name: "Tanzania", crop: "potato", value: 60000000 },
  { admin0_name: "Tanzania", crop: "tea", value: 80000000 },
  { admin0_name: "Tanzania", crop: "coffee", value: 95000000 },
];
```

```{ojs}
import { filterableDataTable as atlasTable } from "/components/_atlasTable.ojs";
import { downloadButton } from "/helpers/uiComponents.ojs";
import { formatUSD } from "/helpers/std.ojs";

atlasTable(dummyData, {
  //These args passed directly to Input.table: https://observablehq.com/@observablehq/input-table
  header: {
    admin0_name: "Country",
    crop: "Crop",
    value: "Value Of Production",
  },
  format: {
    value: formatUSD(),
  },
});

downloadButton(dummyData, "dataExport", "Download Data");
```

```{ojs}
import { enhancedMultiSelect } from "/helpers/enhancedMultiSelect.ojs";
```

```{ojs}
viewof multiSelect = {
  const input = Inputs.select([1, 2, 3, 4, 5, 6], {
    multiple: true,
    label: "Multi-select",
  });

  return enhancedMultiSelect(input, { maxSelections: null, requireAtLeastOne: false });
}

multiSelect

// Bind to another multi-selector (enhanced or not) with this:
Inputs.bind(
  enhancedMultiSelect(
    Inputs.select([1, 2, 3, 4, 5, 6], {
      multiple: true,
      label: "Second Multi-select",
    })
  ),
  viewof multiSelect
)

// For repeated use, defining a global variable and then having rendering as function is helpful
crops = ["maize", "coffee", "tea"]
viewof globalCrop = Inputs.input ([crops[0], crops[2]])

renderCropSelector = () => {
  const input = Inputs.select(crops, {
    multiple: true,
    label: "Crop",
  })
  enhancedMultiSelect(input, {
    maxSelections: null,
    requireAtLeastOne: false,
    enableSelectAll: true
  })
  return Inputs.bind(input, viewof globalCrop)
}

renderCropSelector()

renderCropSelector()

renderCropSelector()

md`The selected crops are: ${globalCrop.join(", ")}`
```
